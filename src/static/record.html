<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="author" content="Chris Koenig" />
</head>

<body>
  <!-- Include jQuery from Media Temple's jQuery CDN -->
  <script src="http://code.jquery.com/jquery-1.6.4.js"></script>

  <script type="text/javascript" src="recorder.js"></script>

  <script type="text/javascript" charset="utf-8">
    "use strict";

    // Via https://github.com/jwagener/recorder.js/blob/master/examples/example-2.html
    function timecode(ms) {
        var hms = {
            h: Math.floor(ms / (60 * 60 * 1000)),
            m: Math.floor((ms / 60000) % 60),
            s: Math.floor((ms / 1000) % 60),
           ms: Math.floor(ms % 1000)
        };
        var tc = [];  // Timecode array to be joined with '.'
        if (hms.h > 0) {
            tc.push(hms.h);
        }
        tc.push((hms.m < 10 && hms.h > 0 ? "0" + hms.m : hms.m));
        tc.push((hms.s < 10  ? "0" + hms.s : hms.s));
        tc.push(hms.ms);
        return tc.join(':');
    }

    Recorder.initialize({
        swfSrc: "recorder.swf"
    });

    function record() {
        Recorder.record({
            progress: function (ms) {
                $("#time").html(timecode(ms));
            }
        });
    }

    function play() {
        Recorder.stop();
        Recorder.play({
            progress: function (ms) {
                $("#time").html(timecode(ms));
            }
        });
    }

    function stop() {
        Recorder.stop();
    }

    window.onload = function () {
        $("#record_button").click(function () {
            start_recording(Recorder);
        });
    };
  </script>

  <div>
    <a href="javascript:record()" id="record">Record</a>
    <a href="javascript:play()" id="play">Play</a>
    <a href="javascript:stop()" id="stop">Stop</a>
  </div>

  <span id="time">0:00:000</span>
</body>

</html>
